<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Enhanced Form Builder UI</title>
  <style>
    /* Global Layout */
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      background-color: #eef2f5;
      padding: 10px;
      gap: 10px;
      min-height: 100vh;
    }

    /* Responsive layout: stack sidebar on top for narrow screens */
    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }

      .sidebar,
      .main-content {
        width: 100%;
        height: auto;
      }
    }

    /* Sidebar */
    .sidebar {
      width: 30%;
      background-color: #fff;
      border-right: 1px solid #ddd;
      padding: 25px;
      box-sizing: border-box;
      overflow-y: auto;
      border-radius: 10px;
      min-height: 100vh;
    }

    /* PDF Title Section */
    .pdf-title-section {
      margin-bottom: 25px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 10px;
      background-color: #fff;
    }
    .pdf-title-section h4 {
      margin: 0 0 10px;
      font-size: 13px;
      color: #9b9b9b;
    }
    .pdf-title-section input[type="text"] {
      width: 100%;
      padding: 17px;
      box-sizing: border-box;
      border: 2px solid #000000;
      border-radius: 6px;
      font-size: 21px;
    }

    /* Grid of Cards in Sidebar */
    .sidebar-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 25px;
    }

    /* Sidebar Cards */
    .sidebar-card {
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      text-align: center;
      padding: 25px 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 2px solid transparent;
    }
    .sidebar-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    .sidebar-card.active {
      border-color: #000000;
      background-color: #ffe5ec;
    }
    .sidebar-card .icon {
      font-size: 42px;
      color: #000000;
      margin-bottom: 10px;
    }
    .sidebar-card label {
      font-size: 16px;
      font-weight: 600;
      color: #000000;
      margin: 0;
    }

    /* Option Forms (Input Sections) */
    .option-form {
      display: none;
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      border: 1px solid #ddd;
    }
    .option-form.active {
      display: block;
    }
    .option-form h4 {
      margin-top: 0;
      font-size: 18px;
      font-weight: 600;
      color: #000000;
    }
    .option-form label {
      display: block;
      margin-top: 15px;
      font-weight: 600;
      color: #333;
    }
    .option-form input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    /* Input with Icon (for adding text/radio/checkbox questions) */
    .input-with-icon {
      position: relative;
    }
    .input-with-icon input {
      width: 100%;
      padding-right: 50px;
    }
    .input-with-icon .icon-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(45deg, #ee5566, #d94f5b);
      border: none;
      font-size: 18px;
      color: #fff;
      cursor: pointer;
      border-radius: 6px;
      padding: 5px 10px;
    }

    /* Icon button style for standalone buttons */
    .icon-btn-standalone {
      width: 100%;
      margin-top: 20px;
      padding: 10px 15px;
      background: linear-gradient(45deg, #ee5566, #d94f5b);
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 6px;
      font-size: 18px;
      transition: background 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .icon-btn-standalone:hover {
      background: linear-gradient(45deg, #d94f5b, #c84c50);
    }

    /* Table Grid Selector Styles */
    #tableGridContainer {
      margin-top: 15px;
      width: 100%;
    }
    #tableSizeDisplay {
      font-size: 14px;
      margin-bottom: 10px;
      color: #ee5566;
    }
    #tableGrid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 5px;
      border: 1px solid #ccc;
      padding: 5px;
      background-color: #fff;
      width: 100%;
      user-select: none;
    }
    .grid-cell {
      width: 100%;
      padding-top: 100%; /* Square cells */
      position: relative;
      border: 1px solid #ddd;
      background-color: #ffecec;
      cursor: pointer;
      border-radius: 10px;
    }
    .grid-cell::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
    .grid-cell.hovered {
      background-color: #ee5566;
    }

    /* Main Content Area */
    .main-content {
      width: 70%;
      padding: 30px;
      box-sizing: border-box;
      overflow-y: auto;
      background-color: #f4f7f9;
      border-radius: 10px;
      min-height: 100vh;
      position: relative;
    }

    /* Header Section (Title + Add Logo Card) */
    .header-section {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    /* PDF Title Display */
    #pdfTitleDisplay {
      font-size: 42px;
      font-weight: 400;
      color: #000000;
    }

    /* "Add Logo" Card */
    .add-logo-card {
      width: 200px;
      height: 100px;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: box-shadow 0.3s ease;
    }
    .add-logo-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .logo-icon {
      width: 40px;
      height: 40px;
      fill: #5f5f5f;
      margin-bottom: 8px;
    }
    .add-logo-text {
      font-size: 16px;
      color: #5f5f5f;
      font-weight: 600;
    }

    /* Generated Form Elements */
    .form-group {
      margin-bottom: 20px;
      background-color: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 1px 6px rgba(0, 0, 0, 0.1);
      border: 1px solid #e1e5ea;
    }
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #ee5566;
    }
    .form-group input[type="text"],
    .form-group select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    /* Generated Checkbox Options Styling */
    .generated-checkbox label {
      margin-right: 10px;
      display: inline-flex;
      align-items: center;
      font-size: 14px;
      color: #000;
    }
    .generated-checkbox input {
      margin-right: 5px;
    }

    /* Table Styling */
    table {
      width: 100%;
      border: 1px solid #ccc;
      border-collapse: collapse;
      margin-top: 20px;
      background-color: #fff;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
      font-size: 14px;
    }
    th[contenteditable="true"] {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
    <!-- PDF Title Section -->
    <div class="pdf-title-section">
      <h4>PDF Title</h4>
      <input type="text" id="pdfTitleInput" placeholder="Enter PDF title" oninput="updatePDFTitle()">
    </div>

    <!-- Grid of Cards -->
    <div class="sidebar-grid">
      <!-- Text Card (default active) -->
      <div class="sidebar-card active" data-target="textForm" onclick="showForm('textForm')">
        <div class="icon">T</div>
        <label>Text</label>
      </div>

      <!-- Radio Card -->
      <div class="sidebar-card" data-target="radioForm" onclick="showForm('radioForm')">
        <div class="icon">○</div>
        <label>Radio</label>
      </div>

      <!-- Dropdown Card -->
      <div class="sidebar-card" data-target="dropdownForm" onclick="showForm('dropdownForm')">
        <div class="icon">▼</div>
        <label>Dropdown</label>
      </div>

      <!-- Checkbox Card -->
      <div class="sidebar-card" data-target="checkboxForm" onclick="showForm('checkboxForm')">
        <div class="icon">☑</div>
        <label>Checkbox</label>
      </div>

      <!-- Table Card -->
      <div class="sidebar-card" data-target="tableForm" onclick="showForm('tableForm')">
        <div class="icon">▦</div>
        <label>Table</label>
      </div>
    </div>

    <!-- Forms (Input Sections) -->
    <!-- Text Form (default active) -->
    <div id="textForm" class="option-form active">
      <h4>Add Text Question</h4>
      <label for="textQuestionInput">Question:</label>
      <div class="input-with-icon">
        <input type="text" id="textQuestionInput" placeholder="Enter your text question">
        <button class="icon-btn" onclick="addTextQuestion()">&#43;</button>
      </div>
    </div>

    <!-- Radio Form -->
    <div id="radioForm" class="option-form">
      <h4>Add Radio Question</h4>
      <label for="radioQuestionInput">Question:</label>
      <div class="input-with-icon">
        <input type="text" id="radioQuestionInput" placeholder="Enter your radio question">
      </div>
      <label>Options:</label>
      <div id="radioOptionsContainer"></div>
      <div class="input-with-icon" style="margin-top:10px;">
        <button class="icon-btn-standalone" onclick="addRadioQuestion()">&#43; Add Question</button>
      </div>
    </div>

    <!-- Dropdown Form -->
    <div id="dropdownForm" class="option-form">
      <h4>Add Dropdown Question</h4>
      <label for="dropdownQuestionInput">Question:</label>
      <div class="input-with-icon">
        <input type="text" id="dropdownQuestionInput" placeholder="Enter your dropdown question">
      </div>
      <label>Options:</label>
      <div id="dropdownOptionsContainer"></div>
      <div class="input-with-icon" style="margin-top:10px;">
        <button class="icon-btn-standalone" onclick="addDropdownQuestion()">&#43; Add Question</button>
      </div>
    </div>

    <!-- Checkbox Form -->
    <div id="checkboxForm" class="option-form">
      <h4>Add Checkbox Question</h4>
      <label for="checkboxQuestionInput">Question:</label>
      <div class="input-with-icon">
        <input type="text" id="checkboxQuestionInput" placeholder="Enter your checkbox question">
      </div>
      <label>Options:</label>
      <div id="checkboxOptionsContainer"></div>
      <div class="input-with-icon" style="margin-top:10px;">
        <button class="icon-btn-standalone" onclick="addCheckboxQuestion()">&#43; Add Question</button>
      </div>
    </div>

    <!-- Table Form -->
    <div id="tableForm" class="option-form">
      <h4>Add Table</h4>
      <!-- Table grid selector -->
      <div id="tableGridContainer">
        <div id="tableSizeDisplay">0 x 0</div>
        <div id="tableGrid"></div>
      </div>
      <button class="icon-btn-standalone" style="margin-top:15px; width:100%;" onclick="clearTableGrid()">Clear Selection</button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content" id="generatedForm">
    <!-- Header: Title on the left, Add Logo Card on the right -->
    <div class="header-section">
      <div id="pdfTitleDisplay"></div>
      <!-- The Add Logo card -->
      <div class="add-logo-card" id="addLogoCard" onclick="document.getElementById('logoInput').click()">
        <!-- Inline SVG shield icon -->
        <svg class="logo-icon" viewBox="0 0 512 512">
          <path d="M256 0C163 0 91 43 91 43v192c0 117.1 78.2 226.6 165 277 86.9-50.4 165-159.9 165-277V43S349 0 256 0z"/>
        </svg>
        <div class="add-logo-text">Add Logo Here</div>
      </div>
    </div>

    <!-- Example heading (optional) -->
    <h2>Your Form Will Appear Here</h2>
  </div>

  <!-- Hidden File Input for Logo Upload -->
  <input type="file" id="logoInput" style="display:none;" accept="image/*" onchange="handleLogoUpload(event)">

  <!-- JavaScript -->
  <script>
    // Show the form corresponding to the selected card and hide the others.
    function showForm(formId) {
      document.querySelectorAll('.option-form').forEach(form => {
        form.classList.remove('active');
      });
      document.querySelectorAll('.sidebar-card').forEach(card => {
        card.classList.remove('active');
      });
      const formToShow = document.getElementById(formId);
      if (formToShow) {
        formToShow.classList.add('active');
      }
      const activeCard = document.querySelector(`.sidebar-card[data-target="${formId}"]`);
      if (activeCard) {
        activeCard.classList.add('active');
      }
    }

    // Update the PDF title dynamically as the user types.
    function updatePDFTitle() {
      const title = document.getElementById('pdfTitleInput').value.trim();
      document.getElementById('pdfTitleDisplay').innerText = title;
    }

    // Add a Text question to the main content.
    function addTextQuestion() {
      const question = document.getElementById('textQuestionInput').value.trim();
      if (question) {
        document.getElementById('generatedForm').insertAdjacentHTML(
          'beforeend',
          `<div class="form-group">
              <label>${question}</label>
              <input type="text">
          </div>`
        );
        document.getElementById('textQuestionInput').value = '';
      }
    }

    // Create a dynamic option input for Radio, Dropdown, or Checkbox
    function createOptionInput(containerId) {
      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'option-input';
      input.placeholder = 'Enter option';
      input.style.marginBottom = '5px';
      input.addEventListener('input', function () {
        const container = document.getElementById(containerId);
        const inputs = container.querySelectorAll('input');
        if (inputs[inputs.length - 1] === input && input.value.trim() !== '') {
          const newInput = createOptionInput(containerId);
          container.appendChild(newInput);
        }
      });
      return input;
    }

    // Initialize 3 dynamic inputs for each container
    function initOptions(containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      for (let i = 0; i < 3; i++) {
        container.appendChild(createOptionInput(containerId));
      }
    }

    // Initialize dynamic options & table grid on load
    window.addEventListener('load', function () {
      initOptions('radioOptionsContainer');
      initOptions('dropdownOptionsContainer');
      initOptions('checkboxOptionsContainer');
      initTableGrid();
    });

    // Add a Radio question
    function addRadioQuestion() {
      const question = document.getElementById('radioQuestionInput').value.trim();
      if (!question) return;
      const container = document.getElementById('radioOptionsContainer');
      const optionInputs = container.querySelectorAll('input');
      const options = [];
      optionInputs.forEach(input => {
        if (input.value.trim() !== '') {
          options.push(input.value.trim());
        }
      });
      if (options.length === 0) return;
      let radioHTML = `<div class="form-group">
                  <label>${question}</label>`;
      options.forEach(opt => {
        radioHTML += `<label style="margin-right:10px;"><input type="radio" name="${question}"> ${opt}</label>`;
      });
      radioHTML += `</div>`;
      document.getElementById('generatedForm').insertAdjacentHTML('beforeend', radioHTML);
      document.getElementById('radioQuestionInput').value = '';
      initOptions('radioOptionsContainer');
    }

    // Add a Dropdown question
    function addDropdownQuestion() {
      const question = document.getElementById('dropdownQuestionInput').value.trim();
      if (!question) return;
      const container = document.getElementById('dropdownOptionsContainer');
      const optionInputs = container.querySelectorAll('input');
      const options = [];
      optionInputs.forEach(input => {
        if (input.value.trim() !== '') {
          options.push(input.value.trim());
        }
      });
      if (options.length === 0) return;
      let dropdownHTML = `<div class="form-group">
                  <label>${question}</label>
                  <select>`;
      options.forEach(opt => {
        dropdownHTML += `<option>${opt}</option>`;
      });
      dropdownHTML += `</select></div>`;
      document.getElementById('generatedForm').insertAdjacentHTML('beforeend', dropdownHTML);
      document.getElementById('dropdownQuestionInput').value = '';
      initOptions('dropdownOptionsContainer');
    }

    // Add a Checkbox question
    function addCheckboxQuestion() {
      const question = document.getElementById('checkboxQuestionInput').value.trim();
      if (!question) return;
      const container = document.getElementById('checkboxOptionsContainer');
      const optionInputs = container.querySelectorAll('input');
      const options = [];
      optionInputs.forEach(input => {
        if (input.value.trim() !== '') {
          options.push(input.value.trim());
        }
      });
      if (options.length === 0) return;
      let checkboxHTML = `<div class="form-group generated-checkbox">
                  <label>${question}</label>`;
      options.forEach(opt => {
        checkboxHTML += `<label><input type="checkbox" name="${question}"> ${opt}</label>`;
      });
      checkboxHTML += `</div>`;
      document.getElementById('generatedForm').insertAdjacentHTML('beforeend', checkboxHTML);
      document.getElementById('checkboxQuestionInput').value = '';
      initOptions('checkboxOptionsContainer');
    }

    // Table Grid Selector for Table Form
    let selectedRows = 0, selectedCols = 0;
    function initTableGrid() {
      const grid = document.getElementById('tableGrid');
      grid.innerHTML = '';
      // Create a 10x10 grid
      for (let r = 1; r <= 10; r++) {
        for (let c = 1; c <= 10; c++) {
          const cell = document.createElement('div');
          cell.className = 'grid-cell';
          cell.dataset.row = r;
          cell.dataset.col = c;
          cell.addEventListener('mouseover', handleCellMouseOver);
          cell.addEventListener('click', handleCellClick);
          grid.appendChild(cell);
        }
      }
    }
    function handleCellMouseOver(e) {
      const cell = e.target;
      selectedRows = parseInt(cell.dataset.row);
      selectedCols = parseInt(cell.dataset.col);
      updateTableGridDisplay();
    }
    function updateTableGridDisplay() {
      const grid = document.getElementById('tableGrid');
      const cells = grid.querySelectorAll('.grid-cell');
      cells.forEach(cell => {
        const r = parseInt(cell.dataset.row);
        const c = parseInt(cell.dataset.col);
        if (r <= selectedRows && c <= selectedCols) {
          cell.classList.add('hovered');
        } else {
          cell.classList.remove('hovered');
        }
      });
      document.getElementById('tableSizeDisplay').innerText = `${selectedRows} x ${selectedCols}`;
    }
    function handleCellClick(e) {
      if (selectedRows > 0 && selectedCols > 0) {
        addTable(selectedRows, selectedCols);
        // Reset grid selection
        selectedRows = 0;
        selectedCols = 0;
        updateTableGridDisplay();
      }
    }
    function addTable(rows, cols) {
      let tableHTML = `<table><tr>`;
      // Create header row (editable headers)
      for (let c = 1; c <= cols; c++) {
        tableHTML += `<th contenteditable="true">Header ${c}</th>`;
      }
      tableHTML += `</tr>`;
      // Create data rows
      for (let r = 1; r <= rows; r++) {
        tableHTML += `<tr>`;
        for (let c = 1; c <= cols; c++) {
          tableHTML += `<td><input type="text"></td>`;
        }
        tableHTML += `</tr>`;
      }
      tableHTML += `</table>`;
      document.getElementById('generatedForm').insertAdjacentHTML('beforeend', tableHTML);
    }
    function clearTableGrid() {
      selectedRows = 0;
      selectedCols = 0;
      updateTableGridDisplay();
    }

    // Handle Logo Upload and display preview in the Add Logo card.
    function handleLogoUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (evt) {
          const logoCard = document.getElementById('addLogoCard');
          logoCard.innerHTML = `
            <div class="logo-preview">
              <img src="${evt.target.result}" alt="Logo Preview" style="max-height:80px; max-width:100%; border-radius:6px;">
            </div>
          `;
          // Remove the click handler so user cannot re-click to upload again
          logoCard.onclick = null;
        }
        reader.readAsDataURL(file);
      }
    }
  </script>
</body>
</html>
